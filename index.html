<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>KIAN`S 7th BIRTHDAY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:site_name" content="KIAN`S BIRTHDAY">
  <meta property="og:title" content="KIAN`S BIRTHDAY" />
  <meta property="og:image" content="https://dhruvang-vidhi.ga/images/couple.jpg">
  <meta property="og:type" content="website" />
  <meta property="og:updated_time" content="1546232947" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/jquery.slick/1.6.0/slick.css'>
  <link href="https://fonts.googleapis.com/css?family=Charm|Open+Sans:400,700" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/style.css">
  <link rel="shortcut icon" href="images/favicon.ico" />
  <style>
    /* Custom styles for RSVP forms */
    .number-control {
      display: flex;
      align-items: center;
      margin-top: 5px;
    }
    
    .number-input {
      width: 50px;
      text-align: center;
      margin: 0 5px;
    }
    
    .increment-btn, .decrement-btn {
      background-color: #f0f0f0;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
      border-radius: 4px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
    }
    
    .form-group input[type="text"],
    .form-group textarea {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    
    .submit-btn {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }
    
    .submit-btn:hover {
      background-color: #45a049;
    }
    
    /* Admin panel styles */
    #admin-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
    }
    
    #admin-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      z-index: 1001;
      overflow-y: auto;
    }
    
    .admin-content {
      background-color: white;
      margin: 5% auto;
      padding: 20px;
      width: 90%;
      max-width: 800px;
      border-radius: 10px;
      position: relative;
    }
    
    .close-admin {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 28px;
      cursor: pointer;
    }
    
    .summary-box {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-bottom: 20px;
      padding: 15px;
      background-color: #f9f9f9;
      border-radius: 8px;
    }
    
    .response-item {
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    
    .attending {
      background-color: #e8f5e9;
    }
    
    .not-attending {
      background-color: #ffebee;
    }
    
    /* Hide RSVP forms initially */
    #attending-form, #notAttending-form, #confirmation-slide {
      display: none;
    }
  </style>
</head>

<body>
  <canvas></canvas>
  <div id="overlay" class="overlay">
    <div class="info">
      <div class="head">Birthday Invitation</div>
      <img src="images/LoadingCake.png" alt="couple" width="100">
      <p>Loading...</p>
    </div>
  </div>

  <div class="slide-container">
    <!-- Your existing slides here -->
    <!-- ... -->

    <!-- RSVP Choice Slide -->
    <div class="wrapper">
      <div class="clash-card barbarian">
        <button class="prevBtn"><img src="images/prev.svg" alt="Previous" width="12"> Prev</button>
        <div class="leaf"></div>
        <div class="letter-box">
          <div class="wrap-box">
            <div class="countdown">
              <div class="days"></div>
              <div class="first">Days<br />Until We become your host</div>
              <div class="last">Azadeh & Aman</div>
            </div>
          </div>
          <div class="wrap-box">
            <div class="Hashs">
              Please RSVP here:<br />
              <span class="rsvp-choice" onclick="showRSVPForm('attending')">Will Attend</span><br/>
              <span class="rsvp-choice" onclick="showRSVPForm('notAttending')">Will Not Attend</span><br/>
              <br />
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Will Attend Form -->
    <div class="wrapper" id="attending-form">
      <div class="clash-card barbarian">
        <button class="prevBtn" onclick="hideRSVPForm()"><img src="images/prev.svg" alt="Previous" width="12"> Prev</button>
        <div class="leaf"></div>
        <div class="letter-box">
          <div class="wrap-box">
            <span class="label-box">RSVP - Will Attend</span>
          </div>
          <div class="wrap-box">
            <div class="form-group">
              <label for="attending-name">Your Name:</label>
              <input type="text" id="attending-name" required>
            </div>
            
            <div class="form-group">
              <label for="attending-contact">Email or Phone:</label>
              <input type="text" id="attending-contact" required>
            </div>
          </div>
          <div class="wrap-box">
            <div class="form-group">
              <label>Number of Adults:</label>
              <div class="number-control">
                <button type="button" class="decrement-btn" onclick="decrement('attending-adults')">-</button>
                <input type="number" id="attending-adults" class="number-input" value="1" min="0" max="10">
                <button type="button" class="increment-btn" onclick="increment('attending-adults')">+</button>
              </div>
            </div>
            
            <div class="form-group">
              <label>Number of Children:</label>
              <div class="number-control">
                <button type="button" class="decrement-btn" onclick="decrement('attending-children')">-</button>
                <input type="number" id="attending-children" class="number-input" value="0" min="0" max="10">
                <button type="button" class="increment-btn" onclick="increment('attending-children')">+</button>
              </div>
            </div>
          </div>
          <div class="wrap-box">
            <button type="button" class="submit-btn" onclick="submitAttendingForm()">Submit RSVP</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Will Not Attend Form -->
    <div class="wrapper" id="notAttending-form">
      <div class="clash-card barbarian">
        <button class="prevBtn" onclick="hideRSVPForm()"><img src="images/prev.svg" alt="Previous" width="12"> Prev</button>
        <div class="leaf"></div>
        <div class="letter-box">
          <div class="wrap-box">
            <span class="label-box">RSVP - Will Not Attend</span>
          </div>
          <div class="wrap-box">
            <div class="form-group">
              <label for="notAttending-name">Your Name:</label>
              <input type="text" id="notAttending-name" required>
            </div>
            
            <div class="form-group">
              <label for="notAttending-contact">Email or Phone:</label>
              <input type="text" id="notAttending-contact" required>
            </div>
          </div>
          <div class="wrap-box">
            <div class="form-group">
              <label for="notAttending-message">Message (optional):</label>
              <textarea id="notAttending-message" rows="3"></textarea>
            </div>
          </div>
          <div class="wrap-box">
            <button type="button" class="submit-btn" onclick="submitNotAttendingForm()">Submit RSVP</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Confirmation Slide -->
    <div class="wrapper" id="confirmation-slide">
      <div class="clash-card barbarian">
        <button class="prevBtn" onclick="hideConfirmation()"><img src="images/prev.svg" alt="Previous" width="12"> Prev</button>
        <div class="leaf"></div>
        <div class="letter-box">
          <div class="wrap-box">
            <span class="label-box">Thank You!</span>
          </div>
          <div class="wrap-box">
            <div id="confirmation-message" style="text-align: center; padding: 20px;"></div>
          </div>
          <div class="wrap-box">
            <button class="submit-btn" onclick="hideConfirmation()">Return to Invitation</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Admin Panel -->
  <div id="admin-button">
    <button id="show-admin" class="bg-gray-700 hover:bg-gray-800 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg">
      ðŸ‘‘
    </button>
  </div>
  
  <div id="admin-modal">
    <div class="admin-content">
      <span class="close-admin" onclick="closeAdminPanel()">&times;</span>
      <h2>RSVP Responses</h2>
      <div id="admin-summary" class="summary-box"></div>
      <div id="admin-responses" class="responses-container"></div>
      <button id="export-data" class="submit-btn" style="margin-top: 20px;">Export to CSV</button>
    </div>
  </div>

  <script>
    // Initialize Slick slider
    $(document).ready(function(){
      $('.slide-container').slick({
        dots: false,
        infinite: false,
        speed: 300,
        slidesToShow: 1,
        adaptiveHeight: true,
        arrows: false
      });
      
      // Handle next button clicks
      $('.nextBtn').click(function(){
        $('.slide-container').slick('slickNext');
      });
      
      // Handle prev button clicks
      $('.prevBtn').click(function(){
        $('.slide-container').slick('slickPrev');
      });
    });

    // RSVP Functions
    function showRSVPForm(type) {
      // Hide all slides
      $('.slide-container').slick('unslick');
      $('.slide-container').hide();
      
      // Show the selected form
      if (type === 'attending') {
        $('#attending-form').show();
      } else {
        $('#notAttending-form').show();
      }
    }
    
    function hideRSVPForm() {
      // Hide RSVP forms
      $('#attending-form').hide();
      $('#notAttending-form').hide();
      
      // Show main slides and reinitialize slider
      $('.slide-container').show();
      $('.slide-container').slick({
        dots: false,
        infinite: false,
        speed: 300,
        slidesToShow: 1,
        adaptiveHeight: true,
        arrows: false
      });
    }
    
    function increment(inputId) {
      const input = document.getElementById(inputId);
      if (parseInt(input.value) < parseInt(input.max)) {
        input.value = parseInt(input.value) + 1;
      }
    }
    
    function decrement(inputId) {
      const input = document.getElementById(inputId);
      if (parseInt(input.value) > parseInt(input.min)) {
        input.value = parseInt(input.value) - 1;
      }
    }
    
    function submitAttendingForm() {
      const rsvpData = {
        name: document.getElementById('attending-name').value,
        contact: document.getElementById('attending-contact').value,
        adults: document.getElementById('attending-adults').value,
        children: document.getElementById('attending-children').value,
        attending: true,
        timestamp: new Date().toISOString()
      };
      
      if (!rsvpData.name || !rsvpData.contact) {
        alert('Please fill in all required fields');
        return;
      }
      
      saveRSVP(rsvpData);
      showConfirmation(rsvpData);
    }
    
    function submitNotAttendingForm() {
      const rsvpData = {
        name: document.getElementById('notAttending-name').value,
        contact: document.getElementById('notAttending-contact').value,
        message: document.getElementById('notAttending-message').value,
        attending: false,
        timestamp: new Date().toISOString()
      };
      
      if (!rsvpData.name || !rsvpData.contact) {
        alert('Please fill in all required fields');
        return;
      }
      
      saveRSVP(rsvpData);
      showConfirmation(rsvpData);
    }
    
    function saveRSVP(data) {
      let rsvps = JSON.parse(localStorage.getItem('kianBirthdayRSVPs') || '[]');
      rsvps.push(data);
      localStorage.setItem('kianBirthdayRSVPs', JSON.stringify(rsvps));
      updateAdminPanel();
    }
    
    function showConfirmation(data) {
      const message = document.getElementById('confirmation-message');
      
      if (data.attending) {
        message.innerHTML = `
          <p>Thank you for your RSVP, ${data.name}!</p>
          <p>We look forward to seeing you and your party of ${parseInt(data.adults) + parseInt(data.children)} at Kian's birthday!</p>
          <p style="font-size: 48px; margin-top: 20px;">ðŸŽ‰</p>
        `;
      } else {
        message.innerHTML = `
          <p>Thank you for letting us know, ${data.name}.</p>
          <p>We're sorry you can't make it but appreciate your response.</p>
          <p style="font-size: 48px; margin-top: 20px;">ðŸ˜Š</p>
        `;
      }
      
      $('#attending-form').hide();
      $('#notAttending-form').hide();
      $('#confirmation-slide').show();
    }
    
    function hideConfirmation() {
      $('#confirmation-slide').hide();
      $('.slide-container').show();
      $('.slide-container').slick({
        dots: false,
        infinite: false,
        speed: 300,
        slidesToShow: 1,
        adaptiveHeight: true,
        arrows: false
      });
    }
    
    // Admin Panel Functions
    document.getElementById('show-admin').addEventListener('click', function() {
      updateAdminPanel();
      document.getElementById('admin-modal').style.display = 'block';
    });
    
    function closeAdminPanel() {
      document.getElementById('admin-modal').style.display = 'none';
    }
    
    function updateAdminPanel() {
      const rsvps = JSON.parse(localStorage.getItem('kianBirthdayRSVPs') || '[]');
      const summary = document.getElementById('admin-summary');
      const responses = document.getElementById('admin-responses');
      
      if (rsvps.length === 0) {
        summary.innerHTML = '<p>No RSVPs yet</p>';
        responses.innerHTML = '';
        return;
      }
      
      // Calculate totals
      let attendingCount = 0;
      let adultCount = 0;
      let childCount = 0;
      
      rsvps.forEach(rsvp => {
        if (rsvp.attending) {
          attendingCount++;
          adultCount += parseInt(rsvp.adults);
          childCount += parseInt(rsvp.children);
        }
      });
      
      // Update summary
      summary.innerHTML = `
        <div class="summary-item">
          <h3>Total Responses:</h3>
          <p>${rsvps.length}</p>
        </div>
        <div class="summary-item">
          <h3>Attending:</h3>
          <p>${attendingCount}</p>
        </div>
        <div class="summary-item">
          <h3>Total Adults:</h3>
          <p>${adultCount}</p>
        </div>
        <div class="summary-item">
          <h3>Total Children:</h3>
          <p>${childCount}</p>
        </div>
      `;
      
      // Update responses list
      responses.innerHTML = '<h3>All Responses:</h3>';
      rsvps.forEach(rsvp => {
        const date = new Date(rsvp.timestamp).toLocaleString();
        responses.innerHTML += `
          <div class="response-item ${rsvp.attending ? 'attending' : 'not-attending'}">
            <p><strong>${rsvp.name}</strong> - ${date}</p>
            <p>${rsvp.contact}</p>
            ${rsvp.attending ? 
              `<p>Attending with ${rsvp.adults} adults and ${rsvp.children} children</p>` : 
              `<p>Not attending${rsvp.message ? ': ' + rsvp.message : ''}</p>`}
          </div>
        `;
      });
    }
    
    // Export to CSV
    document.getElementById('export-data').addEventListener('click', function() {
      const rsvps = JSON.parse(localStorage.getItem('kianBirthdayRSVPs') || '[]');
      
      if (rsvps.length === 0) {
        alert('No data to export');
        return;
      }
      
      let csvContent = "Name,Contact,Attending,Adults,Children,Message,Timestamp\n";
      
      rsvps.forEach(rsvp => {
        csvContent += `"${rsvp.name}","${rsvp.contact}",${rsvp.attending ? 'Yes' : 'No'},${rsvp.adults || '0'},${rsvp.children || '0'},"${rsvp.message || ''}","${rsvp.timestamp}"\n`;
      });
      
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.setAttribute('href', url);
      link.setAttribute('download', 'kian_birthday_rsvps.csv');
      link.style.visibility = 'hidden';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    });
    
    // Initialize admin panel
    updateAdminPanel();
  </script>
</body>
</html>
